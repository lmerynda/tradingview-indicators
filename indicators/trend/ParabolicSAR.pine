// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© TradingView Indicators

//@version=5
indicator("Parabolic SAR", shorttitle="PSAR", overlay=true)

// Inputs
start = input.float(0.02, minval=0.001, maxval=1, step=0.001, title="Start")
increment = input.float(0.02, minval=0.001, maxval=1, step=0.001, title="Increment")
maximum = input.float(0.2, minval=0.01, maxval=1, step=0.01, title="Maximum")

// Parabolic SAR Calculation
sar = ta.sar(start, increment, maximum)

// Determine trend direction
bullish = sar < close
bearish = sar > close

// Plot
plot(sar, title="SAR", color=bullish ? color.green : color.red, style=plot.style_cross, linewidth=2)

// Color bars based on trend
barcolor(bullish ? color.green : color.red, title="Trend Color")

// Alert conditions
alertcondition(ta.cross(close, sar), title="SAR Flip", message="Parabolic SAR flipped direction")
