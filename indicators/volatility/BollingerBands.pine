// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© TradingView Indicators

//@version=5
indicator("Bollinger Bands", shorttitle="BB", overlay=true)

// Inputs
length = input.int(20, minval=1, title="Length")
mult = input.float(2.0, minval=0.001, maxval=50, step=0.1, title="Standard Deviation Multiplier")
src = input.source(close, title="Source")

// Bollinger Bands Calculation
basis = ta.sma(src, length)
dev = mult * ta.stdev(src, length)
upperBand = basis + dev
lowerBand = basis - dev

// Plot
plot(basis, title="Basis (Middle Band)", color=color.orange, linewidth=2)
p1 = plot(upperBand, title="Upper Band", color=color.blue, linewidth=1)
p2 = plot(lowerBand, title="Lower Band", color=color.blue, linewidth=1)
fill(p1, p2, color=color.new(color.blue, 95), title="Band Fill")

// Color bars based on position relative to bands
barcolor(close > upperBand ? color.green : close < lowerBand ? color.red : na, title="Band Breakout Color")

// Alert conditions
alertcondition(ta.cross(close, upperBand), title="Price Crosses Upper Band", message="Price crossed upper Bollinger Band")
alertcondition(ta.cross(lowerBand, close), title="Price Crosses Lower Band", message="Price crossed lower Bollinger Band")
